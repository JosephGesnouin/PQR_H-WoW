<?xml version="1.0" encoding="utf-8" ?><WARLOCK><Ability><Name>-- Start Fight --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if StopRota
or UnitIsDeadOrGhost(&amp;quot;player&amp;quot;)
or IsMounted()
or UnitChannelInfo(&amp;quot;player&amp;quot;) ~= nil
or UnitCastingInfo(&amp;quot;player&amp;quot;) ~= nil
or UnitBuff(&amp;quot;player&amp;quot;, &amp;quot;Drink&amp;quot;)
or UnitBuff(&amp;quot;player&amp;quot;, &amp;quot;Food&amp;quot;)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>-- Offensive Spells --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local buff = { 642, 45438, 31224, 23920, 33786, 19263, 21892, 40733 }
local mob = { &amp;quot;Training Dummy&amp;quot;, &amp;quot;Raider&amp;apos;s Training Dummy&amp;quot; }
local elite = { &amp;quot;Overlord Ror&amp;quot;, &amp;quot;Ragepaw&amp;quot;, &amp;quot;Liam&amp;quot;, &amp;quot;Galleon&amp;quot;, &amp;quot;Fire Giant&amp;quot; }
local ward = { &amp;quot;Grand Warlock Nethekurse&amp;quot;, &amp;quot;Prince Malchezaar&amp;quot;, &amp;quot;Nexus-Prince Sharfaad&amp;quot;, &amp;quot;Xanirya&amp;quot;, &amp;quot;Va&amp;apos;ri&amp;quot; }
local noaggromobs = nil
local immunity = nil
local eliteboss = nil
local warding = nil

for i,v in ipairs(buff) do
  if UnitBuffID(&amp;quot;target&amp;quot;,v) then immunity = 1 end
end

for i,v in ipairs(mob) do
  if UnitName(&amp;quot;target&amp;quot;) == v then noaggromobs = 1 end
end

for i,v in ipairs(ward) do
  if UnitName(&amp;quot;target&amp;quot;) == v then warding = 1 end
end

SWard = nil
function SWard()
	if UnitExists(&amp;quot;target&amp;quot;)
	and warding
	then return 
		true 
	end
end

if immunity
or UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) == nil
or (UnitAffectingCombat(&amp;quot;target&amp;quot;) == nil and noaggromobs == nil and UnitIsPlayer(&amp;quot;target&amp;quot;) == nil)
then return true end

for i,v in ipairs(elite) do
	  if UnitName(&amp;quot;target&amp;quot;) == v then eliteboss = 1 end
	end

IsBoss = nil
function IsBoss()
	if UnitExists(&amp;quot;target&amp;quot;)
	and ( UnitLevel(&amp;quot;target&amp;quot;) == -1 or eliteboss )
		then return 
			true 
		end
	end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Use: Mouseover Skill</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitAffectingCombat(&amp;quot;player&amp;quot;) and IsMouseButtonDown()
	then RunMacroText(&amp;quot;/click &amp;quot;..GetMouseFocus():GetName()) end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Use: Trinket 1</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local _,cd,havecd = GetInventoryItemCooldown(&amp;quot;player&amp;quot;,13)

if cd == 0 and havecd == 1  
and UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
and UnitCastingInfo(&amp;quot;player&amp;quot;) == nil
and UnitAffectingCombat(&amp;quot;player&amp;quot;)
and UnitLevel(&amp;quot;target&amp;quot;) == -1
then 
  UseInventoryItem(13) 
  return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Use Firestone</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local _,enchant,_,_,_,_,_,_ = GetWeaponEnchantInfo()

if enchant == nil
and UnitAffectingCombat(&amp;quot;player&amp;quot;) == nil
and PQR_IsCastingSpell(55158) == false
and GetItemCount(&amp;quot;41174&amp;quot;) &amp;gt;= 1
and ( select(7, GetSpellInfo(55158)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
then
    UseItemByName(&amp;quot;41174&amp;quot;,&amp;quot;player&amp;quot;) 
    if SpellIsTargeting() then PickupInventoryItem(16) end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Create Firestone</Name><Default>false</Default><SpellID>60220</SpellID><Actions></Actions><Lua>if GetItemCount(41174) == 0
and (GetSpellInfo(60220) or GetItemCount(6265) &amp;gt;= 1)
and ( select(7, GetSpellInfo(60220)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
and UnitAffectingCombat(&amp;quot;player&amp;quot;) == nil
and PQR_IsCastingSpell(60220) == false
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Fel Armor</Name><Default>false</Default><SpellID>47893</SpellID><Actions></Actions><Lua>local felarmor = UnitBuffID(&amp;quot;player&amp;quot;, 47893)

if not felarmor
and not UnitIsDeadOrGhost(&amp;quot;player&amp;quot;)
and not IsMounted()
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Summon Imp</Name><Default>false</Default><SpellID>688</SpellID><Actions></Actions><Lua>if UnitCreatureFamily(&amp;quot;pet&amp;quot;) == &amp;quot;Imp&amp;quot; == false
and (UnitExists(&amp;quot;pet&amp;quot;) or UnitExists(&amp;quot;pet&amp;quot;) == nil)
and PQR_IsCastingSpell(688) == false
and ( select(7, GetSpellInfo(688)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
then 
	CastSpellByID(18708)
return true end</Lua><RecastDelay>0</RecastDelay><Target>Pet</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Unstable Affliction</Name><Default>false</Default><SpellID>47843</SpellID><Actions></Actions><Lua>local ua, _, _, _, _, _, uatime = UnitDebuffID(&amp;quot;target&amp;quot;, 47843, &amp;quot;player&amp;quot;) 

if ( ua == nil or ( ua and uatime - GetTime() &amp;lt; 2.5 ) )
--if ( ua == nil or ( ua and uatime - GetTime() &amp;lt; select(7, GetSpellInfo(47843))/1000 ) )
and UnitExists(&amp;quot;target&amp;quot;)
and IsSpellInRange(GetSpellInfo(47843), &amp;quot;target&amp;quot;) == 1
and ( select(7, GetSpellInfo(47843)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>1000</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Death Coil</Name><Default>false</Default><SpellID>47860</SpellID><Actions></Actions><Lua>if getHp(&amp;quot;player&amp;quot;) &amp;lt;= 50
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and IsSpellInRange(GetSpellInfo(47860), &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Life Tap</Name><Default>false</Default><SpellID>57946</SpellID><Actions></Actions><Lua>if getMana(&amp;quot;player&amp;quot;) &amp;lt;= 20
and getHp(&amp;quot;player&amp;quot;) &amp;gt;= 50
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Curse of Doom</Name><Default>false</Default><SpellID>47867</SpellID><Actions></Actions><Lua>if UnitDebuffID(&amp;quot;target&amp;quot;, 47867, &amp;quot;player&amp;quot;) == nil
and IsBoss()
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and IsSpellInRange(GetSpellInfo(47867), &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dest:Immolate</Name><Default>false</Default><SpellID>47811</SpellID><Actions></Actions><Lua>local immolate, _, _, _, _, _, immolatetime = UnitDebuffID(&amp;quot;target&amp;quot;, 47811, &amp;quot;player&amp;quot;) 

if ( immolate == nil or ( immolate and immolatetime - GetTime() &amp;lt; 2.5 ) )
and IsSpellInRange(GetSpellInfo(47811), &amp;quot;target&amp;quot;) == 1
and ( select(7, GetSpellInfo(47811)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and PQR_IsCastingSpell(47811) == false
and UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
then return true end</Lua><RecastDelay>1000</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dest:Chaos Bolt</Name><Default>false</Default><SpellID>59172</SpellID><Actions></Actions><Lua>local immolate = UnitDebuffID(&amp;quot;target&amp;quot;, 47811, &amp;quot;player&amp;quot;)
local ua = UnitDebuffID(&amp;quot;target&amp;quot;, 47843, &amp;quot;player&amp;quot;)

if UnitExists(&amp;quot;target&amp;quot;)
and ( immolate or ua )
and IsSpellInRange(GetSpellInfo(59172), &amp;quot;target&amp;quot;) == 1
and not CooldownRemains(59172)
and ( select(7, GetSpellInfo(59172)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
and PQR_IsCastingSpell(47838) == false
and UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dest:Conflagrate</Name><Default>false</Default><SpellID>17962</SpellID><Actions></Actions><Lua>local immolate = UnitDebuffID(&amp;quot;target&amp;quot;, 47811, &amp;quot;player&amp;quot;)
local sf = UnitDebuffID(&amp;quot;target&amp;quot;, 61290, &amp;quot;player&amp;quot;)

if UnitExists(&amp;quot;target&amp;quot;)
and (immolate or sf)
and not CooldownRemains(17962)
and IsSpellInRange(GetSpellInfo(17962), &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dest:Incinerate</Name><Default>false</Default><SpellID>47838</SpellID><Actions></Actions><Lua>local immolate = UnitDebuffID(&amp;quot;target&amp;quot;, 47811, &amp;quot;player&amp;quot;)

if UnitExists(&amp;quot;target&amp;quot;)
and immolate
and IsSpellInRange(GetSpellInfo(47838), &amp;quot;target&amp;quot;) == 1
and ( select(7, GetSpellInfo(47838)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Curse of the Elements</Name><Default>false</Default><SpellID>47865</SpellID><Actions></Actions><Lua>if ( IsBoss() or EndGameRaid() )
and UnitExists(&amp;quot;target&amp;quot;)
and UnitDebuffID(&amp;quot;target&amp;quot;, 47865) == nil
and IsSpellInRange(GetSpellInfo(47865), &amp;quot;target&amp;quot;) == 1
and UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Curse of Agony</Name><Default>false</Default><SpellID>47864</SpellID><Actions></Actions><Lua>if UnitDebuffID(&amp;quot;target&amp;quot;, 47865, &amp;quot;player&amp;quot;) == nil
and UnitDebuffID(&amp;quot;target&amp;quot;, 47864, &amp;quot;player&amp;quot;) == nil
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and IsSpellInRange(GetSpellInfo(47864), &amp;quot;target&amp;quot;) == 1
and UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Haunt</Name><Default>false</Default><SpellID>59164</SpellID><Actions></Actions><Lua>local haunt, _, _, _, _, _, htime = UnitDebuffID(&amp;quot;target&amp;quot;, 59164, &amp;quot;player&amp;quot;)

if ( haunt == nil or ( haunt and htime - GetTime() &amp;lt; 1.8 ) )
and not CooldownRemains(59164)
and IsSpellInRange(GetSpellInfo(59164), &amp;quot;target&amp;quot;) == 1
and ( select(7, GetSpellInfo(59164)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Soul Fire D</Name><Default>false</Default><SpellID>47825</SpellID><Actions></Actions><Lua>local decimation = UnitBuffID(&amp;quot;player&amp;quot;, 63167)

if UnitExists(&amp;quot;target&amp;quot;)
and IsSpellInRange(GetSpellInfo(47825), &amp;quot;target&amp;quot;) == 1
and decimation
and ( select(7, GetSpellInfo(47825)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Shadow Bolt</Name><Default>false</Default><SpellID>47809</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and IsSpellInRange(GetSpellInfo(47809), &amp;quot;target&amp;quot;) == 1
and PQR_IsCastingSpell(47809) == false
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Shadow Bolt (Debuff)</Name><Default>false</Default><SpellID>47809</SpellID><Actions></Actions><Lua>if UnitDebuffID(&amp;quot;target&amp;quot;, 17800) == nil
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and IsSpellInRange(GetSpellInfo(47809), &amp;quot;target&amp;quot;) == 1
and PQR_IsCastingSpell(47809) == false
then return true end</Lua><RecastDelay>1500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Drain Soul</Name><Default>false</Default><SpellID>47855</SpellID><Actions></Actions><Lua>local ds, _, _, _, _, _, dstime = UnitDebuffID(&amp;quot;target&amp;quot;, 47855, &amp;quot;player&amp;quot;)
local haunt, _, _, _, _, _, htime = UnitDebuffID(&amp;quot;target&amp;quot;, 59164, &amp;quot;player&amp;quot;)
local immolate, _, _, _, _, _, immolatetime = UnitDebuffID(&amp;quot;target&amp;quot;, 47811, &amp;quot;player&amp;quot;) 


if getHp(&amp;quot;target&amp;quot;) &amp;lt;= 25
and (ds == nil or (ds and dstime - GetTime() &amp;lt; 2.1) )
and UnitExists(&amp;quot;target&amp;quot;)
and haunt
and immolate
and IsSpellInRange(GetSpellInfo(47855), &amp;quot;target&amp;quot;) == 1
and PQR_IsCastingSpell(47855) == false
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Life Tap (Buff)</Name><Default>false</Default><SpellID>1454</SpellID><Actions></Actions><Lua>if UnitBuffID(&amp;quot;player&amp;quot;, 63321) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Seed of Corruption</Name><Default>false</Default><SpellID>47836</SpellID><Actions></Actions><Lua>if UnitDebuffID(&amp;quot;target&amp;quot;, 47836, &amp;quot;player&amp;quot;) == nil
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and IsSpellInRange(GetSpellInfo(47836), &amp;quot;target&amp;quot;) == 1
and PQR_IsCastingSpell(47836) == false
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Soulshatter</Name><Default>false</Default><SpellID>29858</SpellID><Actions></Actions><Lua>if UnitThreatSituation(&amp;quot;player&amp;quot;) == 3
and not CooldownRemains(29858)
and (GetSpellInfo(29858) or GetItemCount(6265) &amp;gt;= 1)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Use Spellstone</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local _,enchant,_,_,_,_,_,_ = GetWeaponEnchantInfo()

if enchant == nil
and UnitAffectingCombat(&amp;quot;player&amp;quot;) == nil
and PQR_IsCastingSpell(55194) == false
and GetItemCount(41196) &amp;gt;= 1
and ( select(7, GetSpellInfo(55194)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
then
    UseItemByName(41196,&amp;quot;player&amp;quot;) 
    if SpellIsTargeting() then PickupInventoryItem(16) end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Create Spellstone</Name><Default>false</Default><SpellID>47888</SpellID><Actions></Actions><Lua>if GetItemCount(41196) == 0
and (GetSpellInfo(47888) or GetItemCount(6265) &amp;gt;= 1)
and ( select(7, GetSpellInfo(47888)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
and UnitAffectingCombat(&amp;quot;player&amp;quot;) == nil
and PQR_IsCastingSpell(47888) == false
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Corruption</Name><Default>false</Default><SpellID>47813</SpellID><Actions></Actions><Lua>if UnitDebuffID(&amp;quot;target&amp;quot;, 47813, &amp;quot;player&amp;quot;) == nil
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and IsSpellInRange(GetSpellInfo(47813), &amp;quot;target&amp;quot;) == 1
and UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Immolation Aura</Name><Default>false</Default><SpellID>50589</SpellID><Actions></Actions><Lua>if CheckInteractDistance(&amp;quot;target&amp;quot;, 3)
and UnitBuffID(&amp;quot;player&amp;quot;, 47241)
and UnitExists(&amp;quot;target&amp;quot;)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Metamorphosis</Name><Default>false</Default><SpellID>47241</SpellID><Actions></Actions><Lua>local immolate = UnitDebuffID(&amp;quot;target&amp;quot;, 47811, &amp;quot;player&amp;quot;)
local ua = UnitDebuffID(&amp;quot;target&amp;quot;, 47843, &amp;quot;player&amp;quot;)
local corruption = UnitDebuffID(&amp;quot;target&amp;quot;, 47813, &amp;quot;player&amp;quot;)

if IsBoss()
and UnitExists(&amp;quot;target&amp;quot;)
and corruption
and (ua or immolate)
and IsSpellInRange(GetSpellInfo(47838), &amp;quot;target&amp;quot;) == 1
and not CooldownRemains(47241)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dest:Shadowburn</Name><Default>false</Default><SpellID>47827</SpellID><Actions></Actions><Lua>if GetUnitSpeed(&amp;quot;player&amp;quot;) &amp;gt;= 3
and (GetSpellInfo(60220) or GetItemCount(6265) &amp;gt;= 1)
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and IsSpellInRange(GetSpellInfo(47827), &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Incinerate</Name><Default>false</Default><SpellID>47838</SpellID><Actions></Actions><Lua>local immolate = UnitDebuffID(&amp;quot;target&amp;quot;, 47811, &amp;quot;player&amp;quot;)

if UnitBuffID(&amp;quot;player&amp;quot;,71165)
and UnitExists(&amp;quot;target&amp;quot;)
and IsSpellInRange(GetSpellInfo(47838), &amp;quot;target&amp;quot;) == 1
and immolate
and ( select(7, GetSpellInfo(47838)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Soul Link</Name><Default>false</Default><SpellID>19028</SpellID><Actions></Actions><Lua>local soullink = UnitBuffID(&amp;quot;player&amp;quot;, 19028)

if UnitBuffID(&amp;quot;player&amp;quot;, 35706)
and UnitExists(&amp;quot;pet&amp;quot;) and soullink == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Soul Fire GK/D</Name><Default>false</Default><SpellID>47825</SpellID><Actions></Actions><Lua>local decimation = UnitBuffID(&amp;quot;player&amp;quot;, 63167)
local backdraft = UnitBuffID(&amp;quot;player&amp;quot;, 54277)
local moltencore = UnitBuffID(&amp;quot;player&amp;quot;, 71165)  

if moltencore
and UnitExists(&amp;quot;target&amp;quot;)
and decimation
and backdraft
and IsSpellInRange(GetSpellInfo(47825), &amp;quot;target&amp;quot;) == 1
and ( select(7, GetSpellInfo(47825)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Demonic Empowerment</Name><Default>false</Default><SpellID>47193</SpellID><Actions></Actions><Lua>if IsBoss()
and UnitExists(&amp;quot;target&amp;quot;)
and UnitExists(&amp;quot;pet&amp;quot;)
and IsSpellInRange(GetSpellInfo(47838), &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Shadow Bolt (Non Cast)</Name><Default>false</Default><SpellID>47809</SpellID><Actions></Actions><Lua>if UnitBuffID(&amp;quot;player&amp;quot;, 17941)
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and IsSpellInRange(GetSpellInfo(47809), &amp;quot;target&amp;quot;) == 1
and PQR_IsCastingSpell(47809) == false
then return true end</Lua><RecastDelay>1500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dest:Shadowfury</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if IsLeftAltKeyDown() 
and not GetCurrentKeyBoardFocus() 
and not UnitChannelInfo(&amp;quot;player&amp;quot;) 
then
  CastSpellByID(47847)
  if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end  
  return true
end</Lua><RecastDelay>500</RecastDelay><Target>Click</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Sead of Corruption (AOE)</Name><Default>false</Default><SpellID>47836</SpellID><Actions></Actions><Lua>if SoC == true
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and IsSpellInRange(GetSpellInfo(47836), &amp;quot;target&amp;quot;) == 1
and PQR_IsCastingSpell(47836) == false
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Shadow Cleave</Name><Default>false</Default><SpellID>50581</SpellID><Actions></Actions><Lua>if IsItemInRange(37727, &amp;quot;target&amp;quot;) == 1
and not CooldownRemains(50581)
and UnitBuffID(&amp;quot;player&amp;quot;, 47241)
and UnitExists(&amp;quot;target&amp;quot;)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Demon Charge</Name><Default>false</Default><SpellID>54785</SpellID><Actions></Actions><Lua>if UnitBuffID(&amp;quot;player&amp;quot;, 47241)
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and IsSpellInRange(GetSpellInfo(54785), &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Demon Armor</Name><Default>false</Default><SpellID>47889</SpellID><Actions></Actions><Lua>local demonarmor = UnitBuffID(&amp;quot;player&amp;quot;, 47889)

if not demonarmor
and not UnitIsDeadOrGhost(&amp;quot;player&amp;quot;)
and not IsMounted()
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>-- DarhangeR --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- I&amp;apos;m the original developer of dat profiles. Any changes, copying or sharing without my knowledge direct copyright infringement. For more info: 
-- VK: https://vk.com/darhanger
-- FB: https://fb.com/darhanger
-- E-mail: civayan@gmail.com</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>-- Stats Buffs / Flask --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- Check Druids in party/raid --   
local group = &amp;quot;party&amp;quot;
local members = GetNumPartyMembers()

if GetNumRaidMembers() &amp;gt; 0 then
  group = &amp;quot;raid&amp;quot;
  members = GetNumRaidMembers()
end

CheckDudu = nil
function CheckDudu()
for i = 1, members, 1 do
local member = group..tostring(i)
local _, playerClass = UnitClass(member)
	if playerClass == &amp;quot;DRUID&amp;quot;
	and UnitIsFriend(&amp;quot;player&amp;quot;, member)
		then
			return true
		end
	end
end	
		-- BG Check --         
function BG()
	if GetZoneText() == &amp;quot;Warsong Gulch&amp;quot;
			 or GetZoneText() == &amp;quot;Isle of Conquest&amp;quot;
			 or GetZoneText() == &amp;quot;Arathi Basin&amp;quot;
			 or GetZoneText() == &amp;quot;Alterac Valley&amp;quot;
			 or GetZoneText() == &amp;quot;Eye of the Storm&amp;quot;
			 or GetZoneText() == &amp;quot;Strand of the Ancients&amp;quot;
			 then
				return true
			else
				return false
			end
	end
	
		-- Arena Check --
function Arena ()
	if GetZoneText() == &amp;quot;Ring of Valor&amp;quot;
			 or GetZoneText() == &amp;quot;Ruins of Lordaeron&amp;quot;
			 or GetZoneText() == &amp;quot;Ring of Trials&amp;quot;
			 or GetZoneText() == &amp;quot;Circle of Blood&amp;quot;
			 or GetZoneText() == &amp;quot;Dalaran Arena&amp;quot;
			 then
				return true
			else
				return false
			end
	end


if NoKings == nil then
		for b = 0, 4 do
			for s = 1, GetContainerNumSlots(b) do
				if GetContainerItemID(b, s) == 26 then
					NoKings = true
				--else
					--NoKings = false
				end
			end
		end
	end

if not UnitIsDeadOrGhost(&amp;quot;player&amp;quot;)  then
		
		-- Drums of the WIld --
	if not CheckDudu()
	and not UnitBuffID(&amp;quot;player&amp;quot;, 48470) 
	and not UnitBuffID(&amp;quot;player&amp;quot;, 48469) 
	and not UnitBuffID(&amp;quot;player&amp;quot;, 72588) then   
		for b = 0, 4 do
			for s = 1, GetContainerNumSlots(b) do
				if GetContainerItemID(b, s) == 49634 then
					RunMacroText(&amp;quot;/use &amp;quot;..b..&amp;quot; &amp;quot;..s)
					return true	
				end
			end
		end
	end
	
	-- Voter Buff --
	if not UnitBuffID(&amp;quot;player&amp;quot;, 35912) 
	and not BG()
	and not Arena()
	and NoKings == true then
		for b = 0, 4 do
			for s = 1, GetContainerNumSlots(b) do
				if GetContainerItemID(b, s) == 26 then
					RunMacroText(&amp;quot;/use &amp;quot;..b..&amp;quot; &amp;quot;..s)
					return true
				end	
			end
		end
	end
	
	-- Donor Buff -- 
	if not UnitBuffID(&amp;quot;player&amp;quot;, 35874) 
	and not BG()
	and not Arena()
	then
		for b = 0, 4 do
			for s = 1, GetContainerNumSlots(b) do
				if GetContainerItemID(b, s) == 27 then
					RunMacroText(&amp;quot;/use &amp;quot;..b..&amp;quot; &amp;quot;..s)
					return true	
				end
			end
		end
	end
		
	-- Kings Buff / Drums -- 				
	if GetZoneText() ~= &amp;quot;Scarlet Monastery&amp;quot;
	and not UnitBuffID(&amp;quot;player&amp;quot;, 43223) 
	and not UnitBuffID(&amp;quot;player&amp;quot;, 35912) 
	and not UnitBuffID(&amp;quot;player&amp;quot;, 25898)
	or BG()
	and NoKings == nil 
		then
		for b = 0, 4 do
			for s = 1, GetContainerNumSlots(b) do
				if GetContainerItemID(b, s) == 49633 then
					RunMacroText(&amp;quot;/use &amp;quot;..b..&amp;quot; &amp;quot;..s)
					return true
				end
			end
		end
	end
end

	DPS = nil
	function DPS()
			local _, playerClass = UnitClass(&amp;quot;player&amp;quot;)
			
			if playerClass == &amp;quot;DEATHKNIGHT&amp;quot;
			or playerClass == &amp;quot;HUNTER&amp;quot;
			or playerClass == &amp;quot;WARRIOR&amp;quot;
			or playerClass == &amp;quot;PALADIN&amp;quot;
			or playerClass == &amp;quot;ROGUE&amp;quot;
			then
				return true
			end
		end
		
	SpellDPS = nil
	function SpellDPS()
			local _, playerClass = UnitClass(&amp;quot;player&amp;quot;)
			
			if playerClass == &amp;quot;WARLOCK&amp;quot;
			or playerClass == &amp;quot;SHAMAN&amp;quot;
			or playerClass == &amp;quot;MAGE&amp;quot;
			or playerClass == &amp;quot;DRUID&amp;quot;
			or playerClass == &amp;quot;PRIEST&amp;quot;
			then
				return true
			end
		end


	-- Elixir of Empowerment / 30 Spell Pen --
	if SpellDPS() 
	and not UnitBuffID(&amp;quot;player&amp;quot;, 28514) then
		for b = 0, 4 do
			for s = 1, GetContainerNumSlots(b) do
				if GetContainerItemID(b, s) == 22848 then
					RunMacroText(&amp;quot;/use &amp;quot;..b..&amp;quot; &amp;quot;..s)
					return true	
				end
			end
		end
	end
	
	-- Lesser Flask of Resistance / 50 To All Resistance --
	if DPS()
	and not UnitBuffID(&amp;quot;player&amp;quot;, 62380) then
		for b = 0, 4 do
			for s = 1, GetContainerNumSlots(b) do
				if GetContainerItemID(b, s) == 44939 then
					RunMacroText(&amp;quot;/use &amp;quot;..b..&amp;quot; &amp;quot;..s)
					return true	
				end
			end
		end
	end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Racial</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if pvpdebuffCheck == nil then
	pvpdebuffCheck, _, _, _, _, _, expire = UnitDebuffID(&amp;quot;player&amp;quot;, 6215) --Fear
end
if pvpdebuffCheck == nil then
	pvpdebuffCheck, _, _, _, _, _, expire = UnitDebuffID(&amp;quot;player&amp;quot;, 8122) --Psychic scream
end
if pvpdebuffCheck == nil then
	pvpdebuffCheck, _, _, _, _, _, expire = UnitDebuffID(&amp;quot;player&amp;quot;, 5484) --Howl of Terror
end
if pvpdebuffCheck == nil then
	pvpdebuffCheck, _, _, _, _, _, expire = UnitDebuffID(&amp;quot;player&amp;quot;, 2637) --Hibernate
end
if pvpdebuffCheck == nil then
	pvpdebuffCheck, _, _, _, _, _, expire = UnitDebuffID(&amp;quot;player&amp;quot;, 5246) --Intimidating Shout
end
if pvpdebuffCheck == nil then
	pvpdebuffCheck, _, _, _, _, _, expire = UnitDebuffID(&amp;quot;player&amp;quot;, 6358) --Seduction
end
if pvpdebuffCheck ~= nil then
	if (expire - GetTime()) &amp;gt;= 4 then 
	if UnitRace(&amp;quot;player&amp;quot;) == &amp;quot;Undead&amp;quot; and IsSpellKnown(7744) and not CooldownRemains(7744) then
		CastSpellByID(7744)
		return true
		end
	end
end

if UnitLevel(&amp;quot;target&amp;quot;) == -1
and UnitExists(&amp;quot;target&amp;quot;)
then
	--Troll Berserking--
	if UnitRace(&amp;quot;player&amp;quot;) == &amp;quot;Troll&amp;quot; and IsSpellKnown(26297) and not CooldownRemains(26297) then
		CastSpellByID(26297)
		return true
	end
	--Orc Blood Fury 2--
	if UnitRace(&amp;quot;player&amp;quot;) == &amp;quot;Orc&amp;quot; and IsSpellKnown(20572) and not CooldownRemains(20572) then
		CastSpellByID(20572)
		return true
	end
	--Orc Blood Fury--
	if UnitRace(&amp;quot;player&amp;quot;) == &amp;quot;Orc&amp;quot; and IsSpellKnown(33697) and not CooldownRemains(33697) then 
		CastSpellByID(33697)
		return true
	end
end

if UnitExists(&amp;quot;target&amp;quot;)
then
	--Dwarf Stoneform--
	if 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) &amp;lt; 40 
	and UnitRace(&amp;quot;player&amp;quot;) == &amp;quot;Dwarf&amp;quot; and IsSpellKnown(20594) and not CooldownRemains(20594) then
		CastSpellByID(20594)
		return true
	end
	--Draenei--
	if 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) &amp;lt; 40 
	and UnitRace(&amp;quot;player&amp;quot;) == &amp;quot;Draenei&amp;quot; and IsSpellKnown(28880) and not CooldownRemains(28880) then
		CastSpellByID(28880)
		return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Summon Voidwalker</Name><Default>false</Default><SpellID>697</SpellID><Actions></Actions><Lua>if UnitCreatureFamily(&amp;quot;pet&amp;quot;) == &amp;quot;Voidwalker&amp;quot; == false
and (UnitExists(&amp;quot;pet&amp;quot;) or UnitExists(&amp;quot;pet&amp;quot;) == nil)
and PQR_IsCastingSpell(697) == false
and (GetSpellInfo(697) or GetItemCount(6265) &amp;gt;= 1)
and ( select(7, GetSpellInfo(697)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
then 
	CastSpellByID(18708)
return true end</Lua><RecastDelay>0</RecastDelay><Target>Pet</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Summon Felhunter</Name><Default>false</Default><SpellID>691</SpellID><Actions></Actions><Lua>if UnitCreatureFamily(&amp;quot;pet&amp;quot;) == &amp;quot;Felhunter&amp;quot; == false
and (UnitExists(&amp;quot;pet&amp;quot;) or UnitExists(&amp;quot;pet&amp;quot;) == nil)
and PQR_IsCastingSpell(691) == false
and (GetSpellInfo(691) or GetItemCount(6265) &amp;gt;= 1)
and ( select(7, GetSpellInfo(691)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
then 
	CastSpellByID(18708)
return true end</Lua><RecastDelay>0</RecastDelay><Target>Pet</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Summon Succubus</Name><Default>false</Default><SpellID>712</SpellID><Actions></Actions><Lua>if UnitCreatureFamily(&amp;quot;pet&amp;quot;) == &amp;quot;Succubus&amp;quot; == false
and (UnitExists(&amp;quot;pet&amp;quot;) or UnitExists(&amp;quot;pet&amp;quot;) == nil)
and PQR_IsCastingSpell(712) == false
and (GetSpellInfo(712) or GetItemCount(6265) &amp;gt;= 1)
and ( select(7, GetSpellInfo(712)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
then 
	CastSpellByID(18708)
return true end</Lua><RecastDelay>0</RecastDelay><Target>Pet</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Summon Felguard</Name><Default>false</Default><SpellID>30146</SpellID><Actions></Actions><Lua>if UnitCreatureFamily(&amp;quot;pet&amp;quot;) == &amp;quot;Felguard&amp;quot; == false
and (UnitExists(&amp;quot;pet&amp;quot;) or UnitExists(&amp;quot;pet&amp;quot;) == nil)
and PQR_IsCastingSpell(30146) == false
and (GetSpellInfo(30146) or GetItemCount(6265) &amp;gt;= 1)
and ( select(7, GetSpellInfo(30146)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
then 
	CastSpellByID(18708)
return true end</Lua><RecastDelay>0</RecastDelay><Target>Pet</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>-- Hotkeys --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if not leftkeydown then leftkeydown = 0 end

if IsLeftControlKeyDown()  and GetTime() - leftkeydown &amp;gt; 1 then
	leftkeydown = GetTime()
  	if StopRota then
		StopRota = false 
		PQR_WriteToChat(&amp;quot;Rotation \124cFF15E615reenabled!&amp;quot;)
  	else 
		StopRota = true 
		PQR_WriteToChat(&amp;quot;Rotation \124cFFE61515stopped!&amp;quot;)
  	end
end

if modtime == nil then
	modtime = 0
end

if IsRightShiftKeyDown() and not GetCurrentKeyBoardFocus() and GetTime() - modtime &amp;gt; 0.3 then
	modtime = GetTime()
	if SoC then
		SoC = false
		PQR_WriteToChat(&amp;quot;Seed of Corruption \124cFFE61515Disabled&amp;quot;)
	else
		SoC = true
		PQR_WriteToChat(&amp;quot;Seed of Corruption \124cFF15E615Enabled&amp;quot;)
	end
end

if IsRightAltKeyDown() and not GetCurrentKeyBoardFocus() and GetTime() - modtime &amp;gt; 0.3 then
	modtime = GetTime()
	if RoF then
		RoF = false
		PQR_WriteToChat(&amp;quot;Rain of Fire \124cFFE61515Disabled&amp;quot;)
	else
		RoF = true
		PQR_WriteToChat(&amp;quot;Rain of Fire \124cFF15E615Enabled&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Click</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>-- Function --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if not functionsloaded then

		-- Use Curse of Elements to all in dat raids --
	EndGameRaidDebuffs = {
	97125, -- Ulduar
	98121, -- BWL
	98246 -- BT
	}

	function EndGameRaid()
		for i=1, #EndGameRaidDebuffs do
			if UnitDebuffID(&amp;quot;player&amp;quot;, EndGameRaidDebuffs[i]) then
				return true
			end
		end
	end
	
		-- Combat Check --
	function inCombat()
	if UnitAffectingCombat(&amp;quot;player&amp;quot;) ~= nil
		then
			return true
		end
	end
	
		-- Get HP simple --
	function getHp(unit)
	if UnitExists(unit) ~= nil
		then
			return 100 * UnitHealth(unit) / UnitHealthMax(unit)
		end
	end
	
		-- Get Mana simple --
	function getMana(unit)
	if UnitExists(unit) ~= nil
		then
			return 100 * UnitPower(unit) / UnitPowerMax(unit)
		end
	end
	
		-- Calculate HP simple --
	function CalculateHP(t)
	local ActualWithIncoming = 100 * UnitHealth(t) / UnitHealthMax(t)
		if ActualWithIncoming then
			return ActualWithIncoming
		else
			return 100
		end
	end
		
		-- Spell Cooldown remaining check --
	CooldownRemains = nil
	function CooldownRemains(spell)
		local start, duration, enable = GetSpellCooldown(spell)
		if ( start &amp;gt; 0 and duration &amp;gt; 1.5 ) then
			return start + duration - GetTime()
		else
			return false
		end
	end

		-- Amount of Cooldown that remains --
	function cdRemains(spellid)
		if select(2,GetSpellCooldown(spellid)) + (select(1,GetSpellCooldown(spellid)) - GetTime()) &amp;gt; 0
			then return select(2,GetSpellCooldown(spellid)) + (select(1,GetSpellCooldown(spellid)) - GetTime())
		else return 0
		end
	end

		-- Item Cooldown remaining check --
	ItemCooldownRemains = nil
	function ItemCooldownRemains(item)
		local start, duration, enable = GetItemCooldown(item)
		if ( start &amp;gt; 0 and duration &amp;gt; 1.5 ) then
			return start + duration - GetTime()
		else
			return false
		end
	end
	
		-- Range Check Simple --
	function rangeCheck(spellid,unit)
	if IsSpellInRange(GetSpellInfo(spellid),unit) == 1
	then
		return true
		end
	end
	
		-- Threat --
	function threat(t)
	if UnitExists(t)
		and UnitThreatSituation(t) ~= nil then
			return UnitThreatSituation(t)
		else
			return 0
		end
	end
	
		-- Validator --
	valid = nil
	function valid(t, spellid)
		if UnitExists(t)
		 and not UnitIsDeadOrGhost(t)
		 and UnitCanAttack(&amp;quot;player&amp;quot;, t) == 1
		 and UnitDebuffID(&amp;quot;target&amp;quot;, 33786) == nil
		 and IsSpellInRange(GetSpellInfo(spellid), t) == 1
		 then
			return true
		else
			return false
		end
	end
	
		-- CastSpell --
	function _castSpell(spellid,tar)
		if UnitCastingInfo(&amp;quot;player&amp;quot;) == nil
		and UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
		--and IsPlayerSpell(spellid) == true
		and cdRemains(spellid) == 0
		then
			if tar ~= nil
			and rangeCheck(spellid,tar) == nil
				then
				return false
			elseif tar ~= nil
			and rangeCheck(spellid,tar) == true
				then
				CastSpellByID(spellid, tar)
				return true
			elseif tar == nil
				then
				CastSpellByID(spellid)
				return true
			else
		return false
		end
	end
	end
	
		-- Tabled Cast Time Checking for When you Last Cast Something.
	CheckCastTime = {}
	Nova_CheckLastCast = nil
	function Nova_CheckLastCast(spellid, ytime) -- SpellID of Spell To Check, How long of a gap are you looking for?
		if ytime &amp;gt; 0 then
			if #CheckCastTime &amp;gt; 0 then
				for i=1, #CheckCastTime do
					if CheckCastTime[i].SpellID == spellid then
						if GetTime() - CheckCastTime[i].CastTime &amp;gt; ytime then
							CheckCastTime[i].CastTime = GetTime()
							return true
						else
							return false
						end
					end
				end
			end
			table.insert(CheckCastTime, { SpellID = spellid, CastTime = GetTime() } )
			return true
		elseif ytime &amp;lt;= 0 then
			return true
		end
		return false
	end
	
	function testv()
	return &amp;quot;\124cFF15E615DarhangeR original developer of dat profiles. Any changes, copying or sharing without my knowledge direct copyright infringement. For more info: Discord official chanel: https://discord.gg/zayx7p9&amp;quot;
	end
	PQR_WriteToChat(testv())
	
	if view == nil then 
	view = true
		local eventframe = CreateFrame(&amp;quot;FRAME&amp;quot;)
		DEFAULT_CHAT_FRAME:AddMessage(&amp;quot;\124cffffffff\124Hitem:37727:0:0:0:0:0:0:0:0:0:0\124h[Ruby Acorn]\124h\124r&amp;quot;);
		print(&amp;quot;\124cFF8787EDPlease click on the item above!&amp;quot;)
		print(&amp;quot;\124cFF8787EDПожалуйста жмакните по линку предмета выше!&amp;quot;)
		eventframe:SetScript(&amp;quot;OnEvent&amp;quot;, function(self, event, ...)	       
			if event==&amp;quot;EXECUTE_CHAT_LINE&amp;quot; then
				local arg1 = ...;
				local Verify = string.match(arg1, &amp;quot;/lua&amp;quot;)
					if Verify ~= nil then 
						local cmd =  string.gsub(arg1, &amp;quot;/lua&amp;quot;, &amp;quot; &amp;quot;)
						assert(loadstring(cmd)) ();
					end
			end		
		end)
	eventframe:RegisterEvent(&amp;quot;EXECUTE_CHAT_LINE&amp;quot;)	
	end

functionsloaded = true
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dest:Rain of Fire</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if RoF == true
and GetUnitSpeed(&amp;quot;player&amp;quot;) == 0
and UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
then
	CastSpellByID(47820)
	if SpellIsTargeting() then
		CameraOrSelectOrMoveStart()
		CameraOrSelectOrMoveStop()
	end
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Drain Life</Name><Default>false</Default><SpellID>47857</SpellID><Actions></Actions><Lua>if getHp(&amp;quot;player&amp;quot;) &amp;lt;= 30
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and IsSpellInRange(GetSpellInfo(47857), &amp;quot;target&amp;quot;) == 1
and PQR_IsCastingSpell(47857) == false
and ( select(7, GetSpellInfo(47857)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
and UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Create Soulstone</Name><Default>false</Default><SpellID>47884</SpellID><Actions></Actions><Lua>if GetItemCount(36895) == 0
and (GetSpellInfo(47884) or GetItemCount(6265) &amp;gt;= 1)
and ( select(7, GetSpellInfo(47884)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
and UnitAffectingCombat(&amp;quot;player&amp;quot;) == nil
and PQR_IsCastingSpell(47884) == false
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Use Soulstone</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;focus&amp;quot;)
and UnitInRange(&amp;quot;focus&amp;quot;)
and (not UnitIsDeadOrGhost(&amp;quot;focus&amp;quot;))
and UnitBuffID(&amp;quot;focus&amp;quot;, 47883) == nil
and UnitAffectingCombat(&amp;quot;player&amp;quot;) == nil
and GetItemCount(36895) &amp;gt;= 1
and not ItemCooldownRemains(36895)
and ( select(7, GetSpellInfo(55158)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
then
	UseItemByName(36895,&amp;quot;focus&amp;quot;)
end</Lua><RecastDelay>0</RecastDelay><Target>Focus</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dest:Shadowflame</Name><Default>false</Default><SpellID>61290</SpellID><Actions></Actions><Lua>if CheckInteractDistance(&amp;quot;target&amp;quot;, 3)
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Create Healthstone</Name><Default>false</Default><SpellID>47878</SpellID><Actions></Actions><Lua>if GetItemCount(36894) == 0
and (GetSpellInfo(47878) or GetItemCount(6265) &amp;gt;= 1)
and ( select(7, GetSpellInfo(47878)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
and UnitAffectingCombat(&amp;quot;player&amp;quot;) == nil
and PQR_IsCastingSpell(47878) == false
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Use Healthstone</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if getHp(&amp;quot;player&amp;quot;) &amp;lt;= 35
and GetItemCount(36894) &amp;gt;= 1
and not ItemCooldownRemains(36894)
then
	UseItemByName(36894)
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Void - Sacrifice</Name><Default>false</Default><SpellID>47986</SpellID><Actions></Actions><Lua>if getHp(&amp;quot;player&amp;quot;) &amp;lt;= 65
and UnitExists(&amp;quot;pet&amp;quot;)
and (not UnitIsDeadOrGhost(&amp;quot;pet&amp;quot;))
and UnitInRange(&amp;quot;pet&amp;quot;)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Pet</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>-- Autotarget script --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitAffectingCombat(&amp;quot;player&amp;quot;) 
and UnitExists(&amp;quot;target&amp;quot;) == nil 
then TargetNearestEnemy() end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Cancel Meta</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local p=&amp;quot;player&amp;quot; for i=1,40 

do local _,_,_,_,_,_,_,u,_,_,s=UnitBuff(p,i) 
	if u==p and s==47241 
	and UnitAffectingCombat(&amp;quot;player&amp;quot;) == nil
	then
		CancelUnitBuff(p,i) 
		break 
	end 
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Drain Soul (85k Haste)</Name><Default>false</Default><SpellID>47855</SpellID><Actions></Actions><Lua>local ds, _, _, _, _, _, dstime = UnitDebuffID(&amp;quot;target&amp;quot;, 47855, &amp;quot;player&amp;quot;)
local haunt, _, _, _, _, _, htime = UnitDebuffID(&amp;quot;target&amp;quot;, 59164, &amp;quot;player&amp;quot;)
local immolate, _, _, _, _, _, immolatetime = UnitDebuffID(&amp;quot;target&amp;quot;, 47811, &amp;quot;player&amp;quot;)
local corruption = UnitDebuffID(&amp;quot;target&amp;quot;, 47813, &amp;quot;player&amp;quot;)


if (ds == nil or (ds and dstime - GetTime() &amp;lt; 2.1) )
and haunt
and immolate
and corruption
and IsSpellInRange(GetSpellInfo(47855), &amp;quot;target&amp;quot;) == 1
and PQR_IsCastingSpell(47855) == false
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Soul Fire</Name><Default>false</Default><SpellID>47825</SpellID><Actions></Actions><Lua>local immolate = UnitDebuffID(&amp;quot;target&amp;quot;, 47811, &amp;quot;player&amp;quot;)

if UnitExists(&amp;quot;target&amp;quot;)
and immolate
and IsSpellInRange(GetSpellInfo(47825), &amp;quot;target&amp;quot;) == 1
and ( select(7, GetSpellInfo(47825)) == 0 or GetUnitSpeed(&amp;quot;player&amp;quot;) == 0 )
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Shadow Ward</Name><Default>false</Default><SpellID>47891</SpellID><Actions></Actions><Lua>if SWard()
and not CooldownRemains(47891)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Use: Trinket 2 (PvP)</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local _,cd,havecd = GetInventoryItemCooldown(&amp;quot;player&amp;quot;,14)

if cd == 0 and havecd == 1
and getHp(&amp;quot;player&amp;quot;) &amp;lt;= 20
and UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
and UnitCastingInfo(&amp;quot;player&amp;quot;) == nil
and UnitAffectingCombat(&amp;quot;player&amp;quot;)
then 
	UseInventoryItem(14) 
  return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Curse of the Elements(PvP)</Name><Default>false</Default><SpellID>47865</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;)
and UnitDebuffID(&amp;quot;target&amp;quot;, 47865) == nil
and IsSpellInRange(GetSpellInfo(47865), &amp;quot;target&amp;quot;) == 1
and UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All:Detect Invisibility</Name><Default>false</Default><SpellID>132</SpellID><Actions></Actions><Lua>local detectinvis = UnitBuffID(&amp;quot;player&amp;quot;, 132)

if not detectinvis
and not UnitIsDeadOrGhost(&amp;quot;player&amp;quot;)
and not IsMounted()
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Dem:Demonic Emp(PvP)</Name><Default>false</Default><SpellID>47193</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;)
and UnitExists(&amp;quot;pet&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) == 1
and IsSpellInRange(GetSpellInfo(47838), &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Af:Curse of Exhaustion</Name><Default>false</Default><SpellID>18223</SpellID><Actions></Actions><Lua>if UnitIsMounted(&amp;quot;target&amp;quot;)
and UnitExists(&amp;quot;target&amp;quot;)
and IsSpellInRange(GetSpellInfo(18223), &amp;quot;target&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability></WARLOCK>